import{f as B,a as q,b as K,r,j as e,C,c as f,d as y,B as g,e as w,L as T,I,s as d}from"./index-DjSoFkDJ.js";import{T as _}from"./TrilingualInput-WbYoNRY1.js";import{T as S,P as k}from"./trash-2-mCbCOaEC.js";import"./tabs-BUgrcuyl.js";const D=()=>{const{data:n,isLoading:A}=B(),{toast:s}=q(),o=K(),[l,u]=r.useState(""),[x,v]=r.useState(""),[h,m]=r.useState(""),[j,b]=r.useState(""),i=async(t,a,c)=>{const{error:p}=await d.from("about_content").update({[a]:c}).eq("id",t);p?s({title:"Error",description:p.message,variant:"destructive"}):(s({title:"Saved!"}),o.invalidateQueries({queryKey:["about-content"]}))},N=async()=>{if(!l)return;const t=n!=null&&n.length?Math.max(...n.map(c=>c.sort_order||0))+1:0,{error:a}=await d.from("about_content").insert({key:l,value_en:x,value_bn:h,value_ar:j,sort_order:t});a?s({title:"Error",description:a.message,variant:"destructive"}):(s({title:"Added!"}),o.invalidateQueries({queryKey:["about-content"]}),u(""),v(""),m(""),b(""))},E=async t=>{const{error:a}=await d.from("about_content").delete().eq("id",t);a?s({title:"Error",description:a.message,variant:"destructive"}):(s({title:"Deleted!"}),o.invalidateQueries({queryKey:["about-content"]}))};return A?e.jsx("p",{children:"Loading..."}):e.jsxs("div",{className:"space-y-6 max-w-4xl",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"About Content"}),n==null?void 0:n.map(t=>e.jsxs(C,{children:[e.jsxs(f,{className:"flex flex-row items-center justify-between",children:[e.jsx(y,{className:"text-sm font-mono",children:t.key}),e.jsx(g,{variant:"ghost",size:"icon",onClick:()=>E(t.id),children:e.jsx(S,{className:"h-4 w-4 text-destructive"})})]}),e.jsx(w,{children:e.jsx(_,{label:"Content",multiline:!0,valueEn:t.value_en||"",valueBn:t.value_bn||"",valueAr:t.value_ar||"",onChangeEn:a=>i(t.id,"value_en",a),onChangeBn:a=>i(t.id,"value_bn",a),onChangeAr:a=>i(t.id,"value_ar",a)})})]},t.id)),e.jsxs(C,{children:[e.jsx(f,{children:e.jsx(y,{children:"Add New"})}),e.jsxs(w,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(T,{children:"Key"}),e.jsx(I,{value:l,onChange:t=>u(t.target.value),placeholder:"e.g. hobby_fact"})]}),e.jsx(_,{label:"Content",multiline:!0,valueEn:x,valueBn:h,valueAr:j,onChangeEn:v,onChangeBn:m,onChangeAr:b}),e.jsxs(g,{onClick:N,children:[e.jsx(k,{className:"h-4 w-4 mr-2"}),"Add"]})]})]})]})};export{D as default};
