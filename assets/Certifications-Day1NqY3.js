import{k as f,a as _,b as g,j as r,B as c,C as j,c as C,d as y,e as p,L as u,T as b,I as N,s as o}from"./index-CUeOdhnQ.js";import{T as l}from"./TrilingualInput-DZYQSLcg.js";import{P as B,T as E}from"./trash-2-Ew6vRLH_.js";import"./tabs-C8U4FbYT.js";const S=()=>{const{data:n,isLoading:x}=f(),{toast:t}=_(),d=g(),s=async(e,a)=>{const{error:i}=await o.from("certifications").update(a).eq("id",e);i?t({title:"Error",description:i.message,variant:"destructive"}):(t({title:"Saved!"}),d.invalidateQueries({queryKey:["certifications"]}))},h=async()=>{const e=n!=null&&n.length?Math.max(...n.map(i=>i.sort_order||0))+1:0,{error:a}=await o.from("certifications").insert({title_en:"New Certification",sort_order:e});a?t({title:"Error",description:a.message,variant:"destructive"}):(t({title:"Added!"}),d.invalidateQueries({queryKey:["certifications"]}))},v=async e=>{const{error:a}=await o.from("certifications").delete().eq("id",e);a?t({title:"Error",description:a.message,variant:"destructive"}):(t({title:"Deleted!"}),d.invalidateQueries({queryKey:["certifications"]}))};return x?r.jsx("p",{children:"Loading..."}):r.jsxs("div",{className:"space-y-6 max-w-4xl",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Certifications"}),r.jsxs(c,{onClick:h,children:[r.jsx(B,{className:"h-4 w-4 mr-2"}),"Add"]})]}),n==null?void 0:n.map(e=>r.jsxs(j,{children:[r.jsxs(C,{className:"flex flex-row items-center justify-between",children:[r.jsx(y,{children:e.title_en}),r.jsx(c,{variant:"ghost",size:"icon",onClick:()=>v(e.id),children:r.jsx(E,{className:"h-4 w-4 text-destructive"})})]}),r.jsxs(p,{className:"space-y-4",children:[r.jsx(l,{label:"Title",valueEn:e.title_en,valueBn:e.title_bn||"",valueAr:e.title_ar||"",onChangeEn:a=>s(e.id,{title_en:a}),onChangeBn:a=>s(e.id,{title_bn:a}),onChangeAr:a=>s(e.id,{title_ar:a})}),r.jsx(l,{label:"Institute",valueEn:e.institute_en||"",valueBn:e.institute_bn||"",valueAr:e.institute_ar||"",onChangeEn:a=>s(e.id,{institute_en:a}),onChangeBn:a=>s(e.id,{institute_bn:a}),onChangeAr:a=>s(e.id,{institute_ar:a})}),r.jsx(l,{label:"Year",valueEn:e.year_en||"",valueBn:e.year_bn||"",valueAr:e.year_ar||"",onChangeEn:a=>s(e.id,{year_en:a}),onChangeBn:a=>s(e.id,{year_bn:a}),onChangeAr:a=>s(e.id,{year_ar:a})}),r.jsx(l,{label:"Grade",valueEn:e.grade_en||"",valueBn:e.grade_bn||"",valueAr:e.grade_ar||"",onChangeEn:a=>s(e.id,{grade_en:a}),onChangeBn:a=>s(e.id,{grade_bn:a}),onChangeAr:a=>s(e.id,{grade_ar:a})}),r.jsxs("div",{children:[r.jsx(u,{children:"Skills (JSON array)"}),r.jsx(b,{defaultValue:JSON.stringify(e.skills||[],null,2),onBlur:a=>{try{s(e.id,{skills:JSON.parse(a.target.value)})}catch{t({title:"Invalid JSON",variant:"destructive"})}},className:"font-mono text-xs",rows:4})]}),r.jsxs("div",{children:[r.jsx(u,{children:"Sort Order"}),r.jsx(N,{type:"number",defaultValue:e.sort_order||0,onBlur:a=>s(e.id,{sort_order:parseInt(a.target.value)})})]})]})]},e.id))]})};export{S as default};
