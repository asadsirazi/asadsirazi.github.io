import{i as h,a as _,b as v,j as n,B as u,C as j,c as y,d as C,e as p,L as b,I as f,s as l}from"./index-DjSoFkDJ.js";import{T as i}from"./TrilingualInput-WbYoNRY1.js";import{P as E,T as A}from"./trash-2-mCbCOaEC.js";import"./tabs-BUgrcuyl.js";const q=()=>{const{data:s,isLoading:c}=h(),{toast:t}=_(),o=v(),r=async(e,a)=>{const{error:d}=await l.from("education").update(a).eq("id",e);d?t({title:"Error",description:d.message,variant:"destructive"}):(t({title:"Saved!"}),o.invalidateQueries({queryKey:["education"]}))},g=async()=>{const e=s!=null&&s.length?Math.max(...s.map(d=>d.sort_order||0))+1:0,{error:a}=await l.from("education").insert({degree_en:"New Degree",sort_order:e});a?t({title:"Error",description:a.message,variant:"destructive"}):(t({title:"Added!"}),o.invalidateQueries({queryKey:["education"]}))},x=async e=>{const{error:a}=await l.from("education").delete().eq("id",e);a?t({title:"Error",description:a.message,variant:"destructive"}):(t({title:"Deleted!"}),o.invalidateQueries({queryKey:["education"]}))};return c?n.jsx("p",{children:"Loading..."}):n.jsxs("div",{className:"space-y-6 max-w-4xl",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h1",{className:"text-3xl font-bold",children:"Education"}),n.jsxs(u,{onClick:g,children:[n.jsx(E,{className:"h-4 w-4 mr-2"}),"Add"]})]}),s==null?void 0:s.map(e=>n.jsxs(j,{children:[n.jsxs(y,{className:"flex flex-row items-center justify-between",children:[n.jsx(C,{children:e.degree_en}),n.jsx(u,{variant:"ghost",size:"icon",onClick:()=>x(e.id),children:n.jsx(A,{className:"h-4 w-4 text-destructive"})})]}),n.jsxs(p,{className:"space-y-4",children:[n.jsx(i,{label:"Degree",valueEn:e.degree_en,valueBn:e.degree_bn||"",valueAr:e.degree_ar||"",onChangeEn:a=>r(e.id,{degree_en:a}),onChangeBn:a=>r(e.id,{degree_bn:a}),onChangeAr:a=>r(e.id,{degree_ar:a})}),n.jsx(i,{label:"Institution",valueEn:e.institution_en||"",valueBn:e.institution_bn||"",valueAr:e.institution_ar||"",onChangeEn:a=>r(e.id,{institution_en:a}),onChangeBn:a=>r(e.id,{institution_bn:a}),onChangeAr:a=>r(e.id,{institution_ar:a})}),n.jsx(i,{label:"Year",valueEn:e.year_en||"",valueBn:e.year_bn||"",valueAr:e.year_ar||"",onChangeEn:a=>r(e.id,{year_en:a}),onChangeBn:a=>r(e.id,{year_bn:a}),onChangeAr:a=>r(e.id,{year_ar:a})}),n.jsx(i,{label:"Grade",valueEn:e.grade_en||"",valueBn:e.grade_bn||"",valueAr:e.grade_ar||"",onChangeEn:a=>r(e.id,{grade_en:a}),onChangeBn:a=>r(e.id,{grade_bn:a}),onChangeAr:a=>r(e.id,{grade_ar:a})}),n.jsxs("div",{children:[n.jsx(b,{children:"Sort Order"}),n.jsx(f,{type:"number",defaultValue:e.sort_order||0,onBlur:a=>r(e.id,{sort_order:parseInt(a.target.value)})})]})]})]},e.id))]})};export{q as default};
