import{g as j,a as f,b as m,j as e,B as c,C as p,c as y,d as g,e as k,L as d,I as u,T as C,s as o}from"./index-DjSoFkDJ.js";import{T as _}from"./TrilingualInput-WbYoNRY1.js";import{P as N,T as w}from"./trash-2-mCbCOaEC.js";import"./tabs-BUgrcuyl.js";const B=()=>{const{data:r,isLoading:x}=j(),{toast:t}=f(),n=m(),l=async(s,a)=>{const{error:i}=await o.from("skills").update(a).eq("id",s);i?t({title:"Error",description:i.message,variant:"destructive"}):(t({title:"Saved!"}),n.invalidateQueries({queryKey:["skills"]}))},h=async()=>{const s=r!=null&&r.length?Math.max(...r.map(i=>i.sort_order||0))+1:0,{error:a}=await o.from("skills").insert({title_en:"New Category",icon_name:"Code",skills:[],sort_order:s});a?t({title:"Error",description:a.message,variant:"destructive"}):(t({title:"Added!"}),n.invalidateQueries({queryKey:["skills"]}))},v=async s=>{const{error:a}=await o.from("skills").delete().eq("id",s);a?t({title:"Error",description:a.message,variant:"destructive"}):(t({title:"Deleted!"}),n.invalidateQueries({queryKey:["skills"]}))};return x?e.jsx("p",{children:"Loading..."}):e.jsxs("div",{className:"space-y-6 max-w-4xl",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Skills"}),e.jsxs(c,{onClick:h,children:[e.jsx(N,{className:"h-4 w-4 mr-2"}),"Add Category"]})]}),r==null?void 0:r.map(s=>e.jsxs(p,{children:[e.jsxs(y,{className:"flex flex-row items-center justify-between",children:[e.jsx(g,{children:s.title_en}),e.jsx(c,{variant:"ghost",size:"icon",onClick:()=>v(s.id),children:e.jsx(w,{className:"h-4 w-4 text-destructive"})})]}),e.jsxs(k,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(d,{children:"Icon Name"}),e.jsx(u,{defaultValue:s.icon_name||"",onBlur:a=>l(s.id,{icon_name:a.target.value})})]}),e.jsx(_,{label:"Title",valueEn:s.title_en,valueBn:s.title_bn||"",valueAr:s.title_ar||"",onChangeEn:a=>l(s.id,{title_en:a}),onChangeBn:a=>l(s.id,{title_bn:a}),onChangeAr:a=>l(s.id,{title_ar:a})}),e.jsxs("div",{children:[e.jsx(d,{children:"Skills (JSON array)"}),e.jsx(C,{defaultValue:JSON.stringify(s.skills||[],null,2),onBlur:a=>{try{l(s.id,{skills:JSON.parse(a.target.value)})}catch{t({title:"Invalid JSON",variant:"destructive"})}},className:"font-mono text-xs",rows:6})]}),e.jsxs("div",{children:[e.jsx(d,{children:"Sort Order"}),e.jsx(u,{type:"number",defaultValue:s.sort_order||0,onBlur:a=>l(s.id,{sort_order:parseInt(a.target.value)})})]})]})]},s.id))]})};export{B as default};
