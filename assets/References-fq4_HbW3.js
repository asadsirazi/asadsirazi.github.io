import{n as g,a as p,b as j,j as a,B as c,C as _,c as C,d as m,e as b,L as u,I as x,s as l}from"./index-DjSoFkDJ.js";import{T as d}from"./TrilingualInput-WbYoNRY1.js";import{P as y,T as E}from"./trash-2-mCbCOaEC.js";import"./tabs-BUgrcuyl.js";const z=()=>{const{data:r,isLoading:h}=g(),{toast:i}=p(),t=j(),s=async(e,n)=>{const{error:o}=await l.from("references_list").update(n).eq("id",e);o?i({title:"Error",description:o.message,variant:"destructive"}):(i({title:"Saved!"}),t.invalidateQueries({queryKey:["references"]}))},f=async()=>{const e=r!=null&&r.length?Math.max(...r.map(o=>o.sort_order||0))+1:0,{error:n}=await l.from("references_list").insert({name_en:"New Reference",sort_order:e});n?i({title:"Error",description:n.message,variant:"destructive"}):(i({title:"Added!"}),t.invalidateQueries({queryKey:["references"]}))},v=async e=>{const{error:n}=await l.from("references_list").delete().eq("id",e);n?i({title:"Error",description:n.message,variant:"destructive"}):(i({title:"Deleted!"}),t.invalidateQueries({queryKey:["references"]}))};return h?a.jsx("p",{children:"Loading..."}):a.jsxs("div",{className:"space-y-6 max-w-4xl",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h1",{className:"text-3xl font-bold",children:"References"}),a.jsxs(c,{onClick:f,children:[a.jsx(y,{className:"h-4 w-4 mr-2"}),"Add"]})]}),r==null?void 0:r.map(e=>a.jsxs(_,{children:[a.jsxs(C,{className:"flex flex-row items-center justify-between",children:[a.jsx(m,{children:e.name_en}),a.jsx(c,{variant:"ghost",size:"icon",onClick:()=>v(e.id),children:a.jsx(E,{className:"h-4 w-4 text-destructive"})})]}),a.jsxs(b,{className:"space-y-4",children:[a.jsx(d,{label:"Name",valueEn:e.name_en,valueBn:e.name_bn||"",valueAr:e.name_ar||"",onChangeEn:n=>s(e.id,{name_en:n}),onChangeBn:n=>s(e.id,{name_bn:n}),onChangeAr:n=>s(e.id,{name_ar:n})}),a.jsx(d,{label:"Position",valueEn:e.position_en||"",valueBn:e.position_bn||"",valueAr:e.position_ar||"",onChangeEn:n=>s(e.id,{position_en:n}),onChangeBn:n=>s(e.id,{position_bn:n}),onChangeAr:n=>s(e.id,{position_ar:n})}),a.jsx(d,{label:"Organization",valueEn:e.organization_en||"",valueBn:e.organization_bn||"",valueAr:e.organization_ar||"",onChangeEn:n=>s(e.id,{organization_en:n}),onChangeBn:n=>s(e.id,{organization_bn:n}),onChangeAr:n=>s(e.id,{organization_ar:n})}),a.jsxs("div",{children:[a.jsx(u,{children:"Phone"}),a.jsx(x,{defaultValue:e.phone||"",onBlur:n=>s(e.id,{phone:n.target.value})})]}),a.jsxs("div",{children:[a.jsx(u,{children:"Email"}),a.jsx(x,{defaultValue:e.email||"",onBlur:n=>s(e.id,{email:n.target.value})})]})]})]},e.id))]})};export{z as default};
